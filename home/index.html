<!DOCTYPE html>
<html>
  <head>
    <title>Geothermal Quiz</title>
    <link rel="icon" type="image/png" href="pic/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        font-family: "Comic Sans MS", sans-serif;
        text-align: center;
        background: url("../pic/bg.png") no-repeat center fixed;
        background-size: cover;
        padding: 30px;
        height: 100vh;
        display: flex;
        justify-content: center;
        overflow: hidden;
        margin: 0;
      }

      #quiz-box {
        background: rgba(255, 255, 255, 0.85);
        padding: 50px;
        border-radius: 20px;
        width: 90%;
        max-width: 650px;
        margin: auto;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        position: relative;
        opacity: 0;
      }

      #start-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 110%;
        background: url("../pic/homepage.jpg") no-repeat center center;
        background-size: cover;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        margin: 0;
        padding: 0;
      }

      #start-btn {
        background: #4caf50;
        color: white;
        padding: 15px 25px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-size: 20px;
        margin-top: 400px;
        transition: background 0.3s ease, transform 0.2s ease;
      }

      #start-btn:hover {
        background: #45a049;
        transform: scale(1.05);
      }

      #question {
        font-size: 24px;
        margin-top: 30px;
        color: #333;
        min-height: 80px;
      }

      .btn {
        display: block;
        background: #4caf50;
        color: white;
        padding: 10px;
        margin: 10px auto;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        width: 90%;
        max-width: 300px;
        font-size: 22px;
        transition: background 0.3s ease, transform 0.2s ease;
      }

      .btn:hover {
        background: #45a049;
        transform: scale(1.05);
      }

      #action-btn {
        display: none;
        background: #45a049;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-size: 18px;
        margin-top: 20px;
        margin-right: 5px;
        transition: background 0.3s ease, transform 0.2s ease;
      }

      #action-btn:hover {
        background: #45a049;
        transform: scale(1.05);
      }

      #feedback {
        font-size: 24px;
        margin-top: 20px;
        font-weight: bold;
        min-height: 40px;
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes correctFlash {
        0% {
          background-color: rgba(0, 255, 0, 0.2);
        }
        100% {
          background-color: transparent;
        }
      }

      @keyframes wrongShake {
        0%,
        100% {
          transform: translateX(0);
        }
        20%,
        60% {
          transform: translateX(-10px);
        }
        40%,
        80% {
          transform: translateX(10px);
        }
      }

      @keyframes popFadeIn {
        0% {
          transform: scale(0.5);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          transform: scale(1.05);
        }
      }

      @keyframes slideInUp {
        0% {
          opacity: 0;
          transform: translateY(50px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeOutPage {
        0% {
          opacity: 1;
          transform: scale(1);
        }
        100% {
          opacity: 0;
          transform: scale(1.05);
        }
      }

      .end-message {
        font-size: 36px;
        color: #000000;
        animation: popFadeIn 1s ease forwards;
        font-weight: bold;
      }

      #picker-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      #picker {
        background: #fff;
        border-radius: 16px;
        padding: 20px;
        width: min(90vw, 720px);
        max-height: 80vh;
        overflow: auto;
        animation: popFadeIn 0.3s ease;
      }

      .q-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
        gap: 10px;
        margin-top: 10px;
      }

      .qnum {
        background: #2196f3;
        color: #fff;
        border-radius: 10px;
        padding: 12px 0;
        cursor: pointer;
        user-select: none;
        transition: transform 0.2s ease, background 0.3s ease;
        font-weight: bold;
        text-align: center;
      }

      .qnum:hover {
        transform: scale(1.05);
        background: #1976d2;
      }

      .qnum.disabled {
        background: #ccc !important;
        color: #666;
        pointer-events: none;
      }

      #finish-btn {
        display: inline-block;
        background: #4caf50;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-size: 18px;
        margin-top: 10px;
        transition: background 0.3s ease, transform 0.2s ease;
      }

      #finish-btn:hover {
        background: #45a049;
        transform: scale(1.05);
      }
    </style>
  </head>
  <body>
    <div id="start-screen">
      <button id="start-btn" onclick="startQuiz()">Start Quiz</button>
    </div>

    <div id="quiz-box" style="display: none">
      <h1>Geothermal Energy Quiz</h1>
      <div id="question"></div>
      <button class="btn" onclick="checkAnswer('a')" id="btnA"></button>
      <button class="btn" onclick="checkAnswer('b')" id="btnB"></button>
      <div id="feedback"></div>
      <button id="action-btn"></button>
      <button id="finish-btn" onclick="endQuiz()">Finish Quiz</button>
    </div>

    <div id="picker-overlay">
      <div id="picker">
        <h2>Select a Question</h2>
        <div id="q-grid" class="q-grid"></div>
        <button class="btn" style="width: auto" onclick="closePicker()">
          Close
        </button>
      </div>
    </div>

    <script>
      const quiz = [
        {
          question: "1. Why is geothermal energy reliable?",
          a: "A. It works only in daytime",
          b: "B. It works 24/7",
          correct: "b",
        },
        {
          question: "2. Where is geothermal energy found?",
          a: "A. Underground heat",
          b: "B. In the ocean",
          correct: "a",
        },
        {
          question: "3. Is geothermal energy renewable?",
          a: "A. Yes",
          b: "B. No",
          correct: "a",
        },
        {
          question:
            "4. Which country is one of the top producers of geothermal energy?",
          a: "A. Philippines",
          b: "B. Greenland",
          correct: "a",
        },
        {
          question: "5. What is the main source of geothermal energy?",
          a: "A. Sunlight",
          b: "B. Earth's heat",
          correct: "b",
        },
        {
          question: "6. Which layer is found at the surface where we live?",
          a: "A. Crust",
          b: "B. Outer core",
          correct: "a",
        },
        {
          question: "7. What turns the turbines in a geothermal plant?",
          a: "A. Steam",
          b: "B. Wind",
          correct: "a",
        },
        {
          question: "8. Geothermal energy is considered:",
          a: "A. Non-renewable",
          b: "B. Renewable",
          correct: "b",
        },
        {
          question: "9. The Philippines gets geothermal energy mainly from:",
          a: "A. Volcanic areas",
          b: "B. Ice caps",
          correct: "a",
        },
        {
          question: "10. Geothermal plants produce:",
          a: "A. Electricity",
          b: "B. Plastic",
          correct: "a",
        },
        {
          question: "11. What is used to bring hot water to the surface?",
          a: "A. Pipes",
          b: "B. Buckets",
          correct: "a",
        },
        {
          question: "12. What is the heat from the Earth called?",
          a: "A. Geothermal",
          b: "B. Hydrothermal",
          correct: "a",
        },
        {
          question: "13. Geothermal energy comes from:",
          a: "A. Earthâ€™s internal heat",
          b: "B. Tidal waves",
          correct: "a",
        },
        {
          question: "14. What is Energy?",
          a: "A. The ability to sleep",
          b: "B. The ability to do work or cause change",
          correct: "b",
        },
        {
          question: "15. Which renewable energy uses moving water?",
          a: "A. Hydro Energy",
          b: "B. Solar Energy",
          correct: "a",
        },
        {
          question: "16. What does the word 'Geo' mean?",
          a: "A. Earth",
          b: "B. Fire",
          correct: "a",
        },
        {
          question: "17. What does the word 'Thermal' mean?",
          a: "A. Cold",
          b: "B. Heat",
          correct: "b",
        },
      ];

      let currentQuestion = 0;
      let answeredQuestions = new Set();

      function startQuiz() {
        document.getElementById("start-screen").style.animation =
          "fadeOut 1s forwards";
        setTimeout(() => {
          document.getElementById("start-screen").style.display = "none";
          const quizBox = document.getElementById("quiz-box");
          quizBox.style.display = "block";
          quizBox.style.opacity = "1";
          quizBox.style.animation = "slideInUp 1s ease";
          loadQuestion();
          openPicker();
        }, 1000);
      }

      function loadQuestion(index = currentQuestion) {
        currentQuestion = index;
        const q = quiz[currentQuestion];
        document.getElementById("question").textContent = q.question;
        document.getElementById("btnA").textContent = q.a;
        document.getElementById("btnB").textContent = q.b;
        document.getElementById("feedback").style.opacity = 0;
        document.getElementById("action-btn").style.display = "none";
        document.getElementById("btnA").style.display = "block";
        document.getElementById("btnB").style.display = "block";
        document.getElementById("question").style.display = "block";
        document.getElementById("finish-btn").style.display = "none";
        closePicker();
        const quizBox = document.getElementById("quiz-box");
        quizBox.style.animation = "none";
        void quizBox.offsetWidth;
        quizBox.style.animation = "fadeIn 0.5s ease";
      }

      function checkAnswer(answer) {
        const q = quiz[currentQuestion];
        const correct = q.correct;
        const feedback = document.getElementById("feedback");
        const quizBox = document.getElementById("quiz-box");
        const actionBtn = document.getElementById("action-btn");
        const finishBtn = document.getElementById("finish-btn");
        document.getElementById("btnA").style.display = "none";
        document.getElementById("btnB").style.display = "none";
        document.getElementById("question").style.display = "none";
        answeredQuestions.add(currentQuestion);
        if (answer === correct) {
          feedback.style.color = "green";
          feedback.textContent = "Correct!";
          if (currentQuestion === quiz.length - 1) {
            actionBtn.textContent = "Finish";
            actionBtn.onclick = endQuiz;
          } else {
            actionBtn.textContent = "Next Question";
            actionBtn.onclick = nextQuestion;
          }
          restartAnimation(quizBox, "correctFlash 0.5s ease");
        } else {
          feedback.style.color = "red";
          feedback.textContent = `Oops! The answer is ${q[correct].trim()}`;
          restartAnimation(quizBox, "wrongShake 0.5s ease");
        }

        feedback.style.opacity = 1;
        actionBtn.style.display = "inline-block";
        actionBtn.textContent = "Choose Another Question";
        actionBtn.onclick = openPicker;
        finishBtn.style.display = "inline-block";
      }

      function restartAnimation(element, animation) {
        element.style.animation = "none";
        void element.offsetWidth;
        element.style.animation = animation;
      }

      function nextQuestion() {
        currentQuestion++;
        if (currentQuestion < quiz.length) {
          loadQuestion(currentQuestion);
        } else {
          endQuiz();
        }
      }

      function endQuiz() {
        document.getElementById("quiz-box").innerHTML = `
          <div class="end-message">Congratulations! You Finished the Quiz!</div>
          <button class="btn" style="width:auto; margin-top: 30px;" onclick="goHome()">Back to Homepage</button>
        `;
      }

      function goHome() {
        const body = document.body;
        body.style.animation = "fadeOutPage 0.7s ease forwards";
        setTimeout(() => {
          location.reload();
        }, 700);
      }

      function openPicker() {
        const pickerOverlay = document.getElementById("picker-overlay");
        const qGrid = document.getElementById("q-grid");
        pickerOverlay.style.display = "flex";
        qGrid.innerHTML = "";
        quiz.forEach((q, i) => {
          const qNum = document.createElement("div");
          qNum.classList.add("qnum");
          qNum.textContent = i + 1;
          if (answeredQuestions.has(i)) {
            qNum.classList.add("disabled");
          } else {
            qNum.onclick = () => {
              loadQuestion(i);
            };
          }
          qGrid.appendChild(qNum);
        });
      }

      function closePicker() {
        document.getElementById("picker-overlay").style.display = "none";
      }
    </script>
  </body>
</html>
